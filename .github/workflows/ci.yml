name: CI

on:
  push:
    branches:
      - '**'

jobs:
  validate-branch-name:
    runs-on: ubuntu-latest
    steps:
      - name: Check branch naming convention
        run: |
          BRANCH_NAME="${GITHUB_REF#refs/heads/}"
          echo "Checking branch: $BRANCH_NAME"
          if [[ ! "$BRANCH_NAME" =~ ^(main|dev|test-branch|feature\/.+|bugfix\/.+)$ ]]; then
            echo "‚ùå Error: Branch '$BRANCH_NAME' does not follow the naming convention."
            exit 1
          fi
          echo "‚úÖ Branch name is valid."

  publish:
    runs-on: ubuntu-latest
    needs: validate-branch-name   # üëà This is the key line
    steps:
      - name: Publish
        run: echo "Publishing..."